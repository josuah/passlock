   ___________________________

   ,-. ,-. ,-. ,-. |  ' ,-. |_
   | | .-| '-. '-. |  | '-. |
   |-' '-' '-' '-' '- ' '-' '-
   ___________________________


Passlist is a simple password daemon using the checkpassword [1] interface.

It provides a set of commands to
 -  list password entries, path),
 -  add a password,
 -  delete a password,
 -  check a password.

It stores usernames, password and a path in a simple passwd-style file (default
to /etc/passlist/default).

The password is hashed using argon2id[2] from libsodium [3].

[1]: https://cr.yp.to/checkpwd.html
[2]: https://www.argon2.com/
[3]: https://download.libsodium.org/doc/


Building
--------

The only dependencies is a few of the standard libc and
the libsodium library.

The traditionnal make install uses the default, otherwise:
	make install PREFIX="$PREFIX" LIBSODIUM="$libsodium"


How it works
------------

The main daemon read the password from the user logging in, execute
passlist-check and write the password to a pipe (file descriptor 3).

If the password is accurate, passlist-check then execute into its
specified program.  Otherwise, it exits with an error and nothing
more happen.

Processes running during authentication:
	preauth-daemon passlist-check authenticated-daemon
	└─ passlist-check authenticated-daemon

Processes running after failure:
	preauth-daemon passlist-check authenticated-daemon

Processes running after success:
	preauth-daemon passlist-check authenticated-daemon
	└─ authenticated-daemon
